{"version":3,"sources":["webpack:///./node_modules/more-utils/src/file.js","webpack:///./node_modules/more-utils/index.js","webpack:///./src/views/paste/index.vue?387d","webpack:///src/views/paste/index.vue","webpack:///./src/views/paste/index.vue?b694","webpack:///./src/views/paste/index.vue"],"names":["fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","e","target","result","base64ToBlob","base64","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","type","getObjectURL","obj","url","undefined","window","createObjectURL","URL","webkitURL","pasteImageFromClipboard","element","callback","addEventListener","cbd","clipboardData","ua","navigator","userAgent","items","kind","types","Number","i","item","blob","getAsFile","size","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","staticStyle","attrs","imageUrl","staticRenderFns","_v","name","props","components","data","computed","methods","handleImageChange","console","log","created","mounted","component"],"mappings":"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","file":"static/js/chunk-ae7b5ee4.59b52ced.js","sourcesContent":["/**\n * 上传的file转Base64 DataURL\n * ref: https://segmentfault.com/a/1190000020153597\n */\nexport function fileToBase64(file) {\n  return new Promise((resolve, reject) => {\n    let reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = (e) => {\n      resolve(e.target.result);\n    };\n  });\n}\n\n/**\n * Base64转Blob\n */\nexport function base64ToBlob(base64) {\n  let arr = base64.split(\",\"),\n    mime = arr[0].match(/:(.*?);/)[1],\n    bstr = atob(arr[1]),\n    n = bstr.length,\n    u8arr = new Uint8Array(n);\n\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new Blob([u8arr], { type: mime });\n}\n\n/**\n * 将file对象或blob对象转url\n * ref: https://www.cnblogs.com/linxue/p/9469715.html\n */\nexport function getObjectURL(obj) {\n  var url = null;\n  if (window.createObjectURL != undefined) {\n    url = window.createObjectURL(obj);\n  } else if (window.URL != undefined) {\n    // mozilla(firefox)\n    url = window.URL.createObjectURL(obj);\n  } else if (window.webkitURL != undefined) {\n    // webkit or chrome\n    url = window.webkitURL.createObjectURL(obj);\n  }\n  return url;\n}\n\n/**\n * 监听粘贴事件，从剪切板获取图片blob\n * @param {*} element\n * @param {*} callback\n * ref: https://segmentfault.com/a/1190000004288686\n */\nexport function pasteImageFromClipboard(element, callback) {\n  // demo 程序将粘贴事件绑定到 document 上\n  element.addEventListener(\n    \"paste\",\n    function (e) {\n      // console.log('paste');\n      var cbd = e.clipboardData;\n      var ua = window.navigator.userAgent;\n\n      // 如果是 Safari 直接 return\n      if (!(e.clipboardData && e.clipboardData.items)) {\n        return;\n      }\n\n      // Mac平台下Chrome49版本以下 复制Finder中的文件的Bug Hack掉\n      if (\n        cbd.items &&\n        cbd.items.length === 2 &&\n        cbd.items[0].kind === \"string\" &&\n        cbd.items[1].kind === \"file\" &&\n        cbd.types &&\n        cbd.types.length === 2 &&\n        cbd.types[0] === \"text/plain\" &&\n        cbd.types[1] === \"Files\" &&\n        ua.match(/Macintosh/i) &&\n        Number(ua.match(/Chrome\\/(\\d{2})/i)[1]) < 49\n      ) {\n        return;\n      }\n\n      for (var i = 0; i < cbd.items.length; i++) {\n        var item = cbd.items[i];\n        if (item.kind == \"file\") {\n          var blob = item.getAsFile();\n          if (blob.size === 0) {\n            return;\n          }\n          // blob 就是从剪切板获得的文件 可以进行上传或其他操作\n          callback(blob);\n        }\n      }\n    },\n    false\n  );\n}\n","import { fileToBase64, base64ToBlob, getObjectURL, pasteImageFromClipboard } from \"./src/file.js\";\n\nexport default {\n  fileToBase64,\n  base64ToBlob,\n  getObjectURL,\n  pasteImageFromClipboard,\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_vm._m(0),_c('el-input',{staticStyle:{\"width\":\"200px\",\"margin-bottom\":\"20px\"},attrs:{\"id\":\"text-input\",\"placeholder\":\"从剪切板粘贴图片\"}}),_c('div',{staticClass:\"target-image\"},[_c('img',{attrs:{\"src\":_vm.imageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin-bottom\":\"20px\"}},[_vm._v(\" 使用paste事件监听，从剪切板粘贴图片 \"),_c('a',{staticClass:\"link\",attrs:{\"href\":\"https://github.com/mouday/more-utils.js\",\"target\":\"_blank\"}},[_vm._v(\"more-utils\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-container\">\n\n    <div style=\"margin-bottom:20px;\">\n      使用paste事件监听，从剪切板粘贴图片\n      <a\n        href=\"https://github.com/mouday/more-utils.js\"\n        target=\"_blank\"\n        class=\"link\"\n      >more-utils</a>\n    </div>\n\n    <el-input\n      id=\"text-input\"\n      placeholder=\"从剪切板粘贴图片\"\n      style=\"width:200px;margin-bottom:20px;\"\n    />\n    <div class=\"target-image\">\n      <img\n        :src=\"imageUrl\"\n        alt=\"\"\n      >\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport mo from 'more-utils';\n\nexport default {\n  name: '',\n\n  props: [],\n\n  components: {},\n\n  data() {\n    return {\n      imageUrl: '',\n    };\n  },\n\n  computed: {},\n\n  methods: {\n    handleImageChange(file) {\n      console.log(file);\n      this.imageUrl = mo.getObjectURL(file);\n    },\n  },\n\n  created() {},\n  mounted() {\n    // 监听\n    mo.pasteImageFromClipboard(\n      document.getElementById('text-input'),\n      this.handleImageChange\n    );\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=403cae8c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"403cae8c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}